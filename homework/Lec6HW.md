# 操作系统Lec6 HW

###### 张钰晖 计算机系计55班 2015011372 yuhui-zh15@mails.tsinghua.edu.cn

> 时间有限，抄一遍答案复习加深印象，也给期中期末留一些复习资料，麻烦您不用批改了，谢谢！

### 6.1	非连续内存分配的需求背景

1. 为什么要设计非连续内存分配机制？
   - 提高分配的灵活性
   - 提高内存的利用效率：方便共享、充分利用内存空间
2. 非连续内存分配中内存分块大小有哪些可能的选择？大小与大小是否可变?
   - 大块好管理，小块更灵活
3. 为什么在大块时要设计大小可变，而在小块时要设计成固定大小？小块时的固定大小可以提供多种选择吗？
   - 固定大小好管理，可变大小更灵活，通常可变大小也会通过对齐来减少管理难度

### 6.2	段式存储管理

1. 什么是段、段基址和段内偏移？
   - 段表示访问方式和存储数据等属性相同的一段地址空间
2. 段式存储管理机制的地址转换流程是什么？为什么在段式存储管理中，各段的存储位置可以不连续？这种做法有什么好处和麻烦？
   - 段式存储管理中，地址转换是段基址（段号）加段内偏移
   - 段反映了程序的存储逻辑结构，程序不会从一个段的基址去访问另一个段，于是不同的段可以不连续
   - 好处是可以不连续，方便内存管理，麻烦是地址转换稍微复杂了一些

### 6.3	页式存储管理

1. 什么是页（page）、帧（frame）、页表（page table）、存储管理单元（MMU）、快表（TLB, Translation Lookaside Buffer）和高速缓存（cache）？
2. 页式存储管理机制的地址转换流程是什么？为什么在页式存储管理中，各页的存储位置可以不连续？这种做法有什么好处和麻烦？
   - 页式存储管理中，地址转换是页号加页内偏移
   - CPU使用连续的逻辑地址，存储访问时，逻辑地址先分成逻辑页号和页内偏移，然后通过页表定义的对应关系，把逻辑页面转换成物理页号，最后再把物理页号加页内偏移得到物理地址；于是不同的段可以不连续
   - 好处是可以不连续，方便内存管理中的存储分配和回收；麻烦是地址转换比较复杂（页表项访问开销和页表存储开销），并且频繁进行（每次存储访问会变成两次或更多）。

### 6.4	页表概述

1. 每个页表项有些什么内容？有哪些标志位？它们起什么作用？
2. 页表大小受哪些因素影响？
   - 页大小、地址空间大小、进程数目

### 6.5	快表和多级页表

1. 快表（TLB）与高速缓存（cache）有什么不同？
2. 为什么快表中查找物理地址的速度非常快？它是如何实现的？为什么它的的容量很小？
3. 什么是多级页表？多级页表中的地址转换流程是什么？多级页表有什么好处和麻烦？

### 6.6	反置页表

1. 页寄存器机制的地址转换流程是什么？
   - 页寄存器的内容
   - 逻辑地址进行hash，然后查相应页寄存器
2. 反置页表机制的地址转换流程是什么？
   - 反置页表项的内容
   - 逻辑地址和进程号共同进行hash，然后查相应页寄存器
3. 反置页表项有些什么内容？
   - PID、逻辑页号、标志位

### 6.7	段页式存储管理

1. 段页式存储管理机制的地址转换流程是什么？这种做法有什么好处和麻烦？
2. 如何实现基于段式存储管理的内存共享？
3. 如何实现基于页式存储管理的内存共享？